$("#cr-year").html((new Date).getFullYear()),$(document).ready(function(){function e(){"NULL"==$("select#instituicao").val()?$("div#qualInstituicao").removeClass("hidden"):$("div#qualInstituicao").addClass("hidden"),$("select#instituicao").change(function(){"NULL"==$(this).val()?$("div#qualInstituicao").removeClass("hidden"):$("div#qualInstituicao").addClass("hidden")})}function a(){var a=$("select#uf").val(),r="https://api.pravaler.com.br/v1/interesse/instituicoes?tipo="+$("#tipo:checked").val();a.length>0&&(r+="&estado="+a),$.ajax({url:r,type:"GET",cache:!1,dataType:"json",crossDomain:!0,beforeSend:function(){$("div#qualInstituicao").addClass("hidden"),$("#instituicoes").html('<img src="./assets/img/loading.gif" />')},success:function(a){if(a){var r=$("<select />").attr({id:"instituicao",name:"instituicao",class:"selectpicker","data-size":"8"});$("<option />").attr({value:""}).text("Nome da instituição").appendTo(r);for(var i=0;i<a.length;i++)$("<option />").attr({value:a[i].apelido}).text(a[i].apelido).appendTo(r);$("<option />").attr({value:"NULL"}).text("Outra faculdade não parceira").appendTo(r),$("#instituicoes").html(r),$(".selectpicker").selectpicker("refresh"),e()}}})}jQuery.validator.addMethod("cpf",function(e,a){for(e=(e=e.replace(".","")).replace(".",""),cpf=e.replace("-","");cpf.length<11;)cpf="0"+cpf;var r=[],o=new Number,t=11;for(i=0;i<11;i++)r[i]=cpf.charAt(i),i<9&&(o+=r[i]*--t);for((x=o%11)<2?r[9]=0:r[9]=11-x,o=0,t=11,y=0;y<10;y++)o+=r[y]*t--;return(x=o%11)<2?r[10]=0:r[10]=11-x,cpf.charAt(9)==r[9]&&cpf.charAt(10)==r[10]&&!cpf.match(/^0+$|^1+$|^2+$|^3+$|^4+$|^5+$|^6+$|^7+$|^8+$|^9+$/)},"Informe um CPF válido."),$("#formInteresse").validate({errorLabelContainer:"#erro_cad",errorElement:"div",errorPlacement:function(e,a){return!0},invalidHandler:function(e,a){$("#errorMessage").show()},rules:{nome:{required:!0},email:{required:!0,email:!0},cpf:{required:!0,cpf:!0},telefone:{required:!0},uf:{required:!0},instituicao:{required:!0},cidade:{required:!0}},messages:{nome:{required:'&bull; Campo "Nome" obrigatório.'},email:{required:'&bull; Campo "E-mail" obrigatório.'},cpf:{required:'&bull; Campo "CPF" obrigatório.',cpf:"&bull; CPF inválido"},telefone:{required:'&bull; Campo "DDD + Telefone" obrigatório.'},uf:{required:'&bull; Campo "UF" obrigatório.'},instituicao:{required:"&bull; Selecione a Instituição."},cidade:{required:'&bull; Campo "Cidade" obrigatório.'}},submitHandler:function(e){}}),$("#cpf").mask("999.999.999-99"),$("#telefone").mask("(00) 0000-00009"),$("#enviarForm").click(function(e){if(e.preventDefault(),e.stopPropagation(),$("#errorMessage").hide(),!$("#checkbox1").prop("checked"))return alert("Você precisa aceitar os termos e condições"),!1;var a=$("input[name=matriculado]:checked");if("true"!==a.val()&&"false"!==a.val())return alert("Você precisa marcar se é matriculado ou não"),!1;var r=$("#telefone").val(),i=$("#cpf").val(),o=document.referrer;""==o&&(o=window.location.href);var t={nome:$("#nome").val(),telefone:r.replace(/\D/g,""),email:$("#email").val(),instituicao:$("#instituicao").val(),instituicaoNaoParceira:$("#instituicaoNaoParceira").val(),campus:$("#campus").val(),curso:$("#curso").val(),cpf:i.replace(/\D/g,""),cidade:$("#cidade").val(),estado:$("#uf").val(),tipo:1,parceiroId:"",compartilharInformacoes:$("#compartilharInformacoes").val(),urlOrigem:o,matriculado:"true"===a.val().toLowerCase()};return $("#formInteresse").valid()&&$.ajax({type:"POST",url:"https://api.pravaler.com.br/v1/interesse/",data:JSON.stringify(t),success:function(e){if(e.token){$("#cadastro").attr("href","https://cadastro.creditouniversitario.com.br/app/#/etapas/cadastro?token="+e.token)}$("#formInteresse").get(0).reset(),$("#formInteresse").validate().resetForm(),$("#errorMessage").hide(),$("#success").addClass("active"),$("#resposta").removeClass("hidden");var a=1.2*$("#resposta").height();$("#div-form").animate({height:a},500),setTimeout(function(){$("#div-form").addClass("active"),$("#resposta").removeClass("hidden"),$("#formInteresse").addClass("hidden"),$("#success").removeClass("active").fadeOut()},500)},error:function(e){alert("Houve um erro ao salvar os dados.")},dataType:"json"}),!1}),$("select#uf").change(function(){a()}),$("input[name=matriculado]").click(function(){var e=$("div.alinhamento > label");"true"===$(this).val()?(e.eq(0).css("border","1px solid #460787"),e.eq(0).css("background-color","#460787"),e.eq(0).css("color","#fff"),e.eq(1).css("border","1px solid #ccc"),e.eq(1).css("background-color","#fff"),e.eq(1).css("color","#a3968b")):(e.eq(0).css("border","1px solid #ccc"),e.eq(0).css("background-color","#fff"),e.eq(0).css("color","#a3968b"),e.eq(1).css("border","1px solid #460787"),e.eq(1).css("background-color","#460787"),e.eq(1).css("color","#fff"))}),a(),e()});